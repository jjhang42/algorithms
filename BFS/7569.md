# Tomato (3D) — Problem 7569

**Time Limit:** 1 second  
**Memory Limit:** 256 MB

---

## Problem

Cheolsu’s tomato farm has a large warehouse where tomatoes are stored. Tomatoes are placed one per cell in grid-shaped boxes, and these boxes are stacked vertically in the warehouse.

Some tomatoes are already ripe, while others are not. After one day, each ripe tomato causes adjacent unripe tomatoes to become ripe. For a single tomato, **adjacent** positions are the six orthogonal neighbors: **up, down, left, right, front, and back** (no diagonals). A tomato never ripens on its own without influence. Cheolsu wants to know the minimum number of days needed until **all** tomatoes in storage are ripe.

Given the dimensions of the grid-shaped boxes and the initial states of the tomatoes, determine the minimum number of days required for all tomatoes to become ripe. Some cells may be empty (i.e., no tomato).

---

## Input

The first line contains three integers **M**, **N**, and **H**:
- **M**: number of columns in a box (2 ≤ M ≤ 100)  
- **N**: number of rows in a box (2 ≤ N ≤ 100)  
- **H**: number of stacked boxes (1 ≤ H ≤ 100)

Then, starting from the **bottom box** to the **top box**, the states of the tomatoes are given:
- For each box, there are **N** lines, and each line has **M** integers.
- Each integer represents the state of a cell:  
  - `1`: ripe tomato  
  - `0`: unripe tomato  
  - `-1`: no tomato in this cell

These **N** lines are repeated **H** times (one block of N lines per box layer). It is guaranteed that there is at least one tomato somewhere in the input.

---

## Output

Print the **minimum number of days** required until all tomatoes are ripe.  
- If all tomatoes are already ripe from the start, print `0`.  
- If it is **impossible** for all tomatoes to become ripe, print `-1`.

---

## Example

### Input 1
```
5 3 1
0 -1 0 0 0
-1 -1 0 1 1
0 0 0 1 1
```
### Output 1
```
-1
```

### Input 2
```
5 3 2
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 1 0 0
0 0 0 0 0
```
### Output 2
```
4
```

### Input 3
```
4 3 2
1 1 1 1
1 1 1 1
1 1 1 1
1 1 1 1
-1 -1 -1 -1
1 1 1 -1
```
### Output 3
```
0
```

---

## Source
Olympiad > Korean Olympiad in Informatics > Provincial Contest 2013 > Elementary Division Problem 3

**Data added by:** david02324, hck5209, kki5150  
**Typo found by:** mwy3055  
**Incorrect data reported by:** tncks0121

---

## Algorithm Classification
- Graph Theory  
- Graph Traversal  
- Breadth-First Search (BFS)  
- Shortest Path  
- Grid Graph
